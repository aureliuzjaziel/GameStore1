<nav class="navbar">
  <div class="nav-container">
    <!-- Logo -->
    <div class="nav-logo">
      <span class="logo-icon">🎮</span>
      <span class="logo-text">GameStore</span>
    </div>

    <!-- Menu Items -->
    <ul class="nav-menu" [class.active]="isMobileMenuOpen">
      <li class="nav-item">
        <a routerLink="/home" class="nav-link" routerLinkActive="active" (click)="closeMobileMenu()">
          <i class="icon">🏠</i>
          <span>Inicio</span>
        </a>
      </li>
      <li class="nav-item">
        <a routerLink="/productos" class="nav-link" routerLinkActive="active" (click)="closeMobileMenu()">
          <i class="icon">🎯</i>
          <span>Juegos</span>
        </a>
      </li>
      
      <!-- Mostrar Login y Registro solo si NO está logueado -->
      <ng-container *ngIf="!logeado()">
        <li class="nav-item">
          <a routerLink="/login" class="nav-link" routerLinkActive="active" (click)="closeMobileMenu()">
            <i class="icon">🔐</i>
            <span>Login</span>
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/registro" class="nav-link" routerLinkActive="active" (click)="closeMobileMenu()">
            <i class="icon">👤</i>
            <span>Registro</span>
          </a>
        </li>
      </ng-container>

      <!-- Mostrar opciones de usuario logueado -->
      <ng-container *ngIf="logeado()">
        <li class="nav-item user-info">
          <span class="nav-link user-welcome">
            <i class="icon">👋</i>
            <span>Hola, {{ getUserName() }}</span>
          </span>
        </li>
        <li class="nav-item">
          <button class="nav-link logout-btn" (click)="logout()">
            <i class="icon">🚪</i>
            <span>Cerrar Sesión</span>
          </button>
        </li>
      </ng-container>
    </ul>

    <!-- Search Bar -->
    <div class="search-container">
      <input type="text" placeholder="Buscar juegos..." class="search-input">
      <button class="search-btn">🔍</button>
    </div>

    <!-- Cart & Profile -->
    <div class="nav-actions">
      <div class="cart-container">
        <button class="cart-btn" (click)="toggleCarrito()">
          <span class="cart-icon">🛒</span>
          <span class="cart-count" *ngIf="getCantidadCarrito() > 0">{{ getCantidadCarrito() }}</span>
        </button>
        
        <!-- Dropdown del carrito -->
        <div class="cart-dropdown" *ngIf="isCarritoOpen" (click)="$event.stopPropagation()">
          <div class="cart-header">
            <h3>Carrito de Compras</h3>
            <button class="close-cart" (click)="cerrarCarrito()">✕</button>
          </div>
          
          <div class="cart-content" *ngIf="getProductosCarrito().length > 0; else carritoVacio">
            <div class="cart-item" *ngFor="let producto of getProductosCarrito()">
              <img [src]="producto.imagen" [alt]="producto.nombre" class="cart-item-img">
              <div class="cart-item-info">
                <h4>{{ producto.nombre }}</h4>
                <p class="cart-item-price">${{ producto.precio }}</p>
                <div class="cart-item-quantity">
                  <span>Cantidad: {{ producto.cantidad }}</span>
                </div>
              </div>
              <div class="cart-item-total">
                ${{ (producto.precio * producto.cantidad).toFixed(2) }}
              </div>
            </div>
            
            <div class="cart-footer">
              <div class="cart-total">
                <strong>Total: ${{ getTotalCarrito().toFixed(2) }}</strong>
              </div>
              <button class="btn-checkout" (click)="procesarCompra()">
                🛒 Procesar Compra
              </button>
            </div>
          </div>
          
          <ng-template #carritoVacio>
            <div class="cart-empty">
              <p>Tu carrito está vacío</p>
              <span class="empty-icon">🛒</span>
            </div>
          </ng-template>
        </div>
      </div>
      
      <!-- Perfil solo si está logueado -->
      <div class="profile-menu" *ngIf="logeado()">
        <button class="profile-btn">
          <span class="profile-avatar">👤</span>
        </button>
        <!-- Dropdown menu opcional -->
        <div class="profile-dropdown">
          <span class="user-name">{{ getUserName() }}</span>
          <button class="dropdown-item" (click)="logout()">
            <i class="icon">🚪</i>
            Cerrar Sesión
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Menu Toggle -->
    <div class="hamburger" (click)="toggleMobileMenu()">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
</nav>
